{% extends "base.html" %}
{% load static %}
{% block title %}
<title>Production View</title>
{% endblock %}


{% block head_style %}

<link rel="stylesheet" href="{% static 'camera/bootstrap-4.5.3-dist/css/bootstrap.min.css' %}">

<!-- 引入jQuery -->
<script src="{% static 'camera/jquery/jquery-3.5.1.min.js' %}"></script>
<!-- 引入Popper.js -->
<script src="{% static 'camera/other_js/popper.min.js' %}"></script>
<!-- 引入Bootstrap JS -->
<script src="{% static 'camera/bootstrap-4.5.3-dist/js/bootstrap.min.js' %}"></script>


<script src="{% static 'camera/jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>
<link rel="stylesheet" href="{% static 'camera/jquery-ui-themes-1.12.1/jquery-ui.css' %}">


{% endblock %}


{% block content %}

<div class="row">

    {% block product_image_grid %}
    <div class="col-md-7 mb-3" id="product-images">
    </div>
    {% endblock %}

    <div class="col-md-5 mb-3">

        <h2>AI视觉外观缺陷检测系统</h2>
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="添加或选择产品批次" id="production-input" aria-label="Production">

            <div class="input-group-append">
                <span class="input-group-text" id="background-status" ></span>
                <button class="btn btn-outline-secondary" type="button" id="start-camera-background">开始</button>
                <button class="btn btn-outline-secondary" type="button" id="stop-camera-background">停止</button>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-2">
                <div class="input-group">
                    <span class="input-group-text" id="">操作员:</span>
                    <input type="text" class="form-control" id="operatorId" placeholder="{{ user_name }}" readonly>
                </div>
            </div>
            <div class="col-md-6 mb-2">
                <div class="input-group">
                    <span class="input-group-text" id="">合格率:</span>
                    <input type="text" class="form-control" id="pass-rate" placeholder="1">
                    <span class="input-group-text">PSC</span>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-2">
                <div class="input-group">
                    <span class="input-group-text" id="">设备速度:</span>
                    <input type="text" class="form-control" id="dev-speed" placeholder="0">
                    <span class="input-group-text">PSC</span>
                </div>
            </div>

            <div class="col-md-6 mb-2">
                <div class="input-group">
                    <span class="input-group-text" id="">生产速度:</span>
                    <input type="text" class="form-control" id="product-speed" placeholder="0">
                    <span class="input-group-text">PSC</span>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-2">
                <div class="input-group">
                    <span class="input-group-text" >合格数量:</span>
                    <input type="text" class="form-control" id="pass-num" placeholder="0">
                </div>
            </div>
            <div class="col-md-6">
                <button class="btn btn-secondary w-100" type="button" id="clear-btn" onclick="">清零</button>
            </div>
        </div>
        <img id="origin-image" src="{% static 'camera/images/600x300.svg' %}" alt="Camera Stream" class="img-fluid rounded">

    </div>
</div>

<div id="product-image-url" data-url="{% url 'productioin_images' %}" style="display: none;"></div>
<div id="latest-product-url" data-url="{% url 'latest_product' %}" style="display: none;"></div>
<div id="search-batch-url" data-url="{% url 'search_batch_number' %}" style="display: none;"></div>
<div id="start-camera-url" data-url="{% url 'start_camera_background' %}" style="display: none;"></div>
<div id="stop-camera-url" data-url="{% url 'stop_camera_background' %}" style="display: none;"></div>
<div id="gallery-url" data-url="{% url 'gallery-photo-upload' %}" style="display: none;"></div>
<div id="update-noNGrate-url" data-url="{% url 'update_noNGrate' %}" style="display: none;"></div>

{% endblock %}

{% block endscript %}
<script>
 var csrftoken = $("[name=csrfmiddlewaretoken]").val();
 const product_image_url = $("#product-image-url").data("url");
 const start_camera_url = $("#start-camera-url").data("url");
 const stop_camera_url = $("#stop-camera-url").data("url");
 const gallery_url = $('#gallery-url').data("url");
 const update_noNGrate_url = $('#update-noNGrate-url').data('url');

</script>

<script src="{% static 'production_js/functions.js' %}"></script>
<script src="{% static 'production_js/document_ready.js' %}"></script>


{% endblock %}
